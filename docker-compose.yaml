version: '2'
services:
  app1:
    image: fdrennan/plumber
    command: /app/plumber.R
    volumes:
     - .:/app
    restart: always
  app2:
    image: fdrennan/plumber
    command: /app/plumber.R
    volumes:
     - .:/app
    restart: always
  rstudio:
    image: rocker/rstudio
    volumes:
     - .:/app
    restart: always
    ports:
     - "8787:8787"
  nginx:
      image: nginx:1.9
      ports:
       - "80:80"
      volumes:
       - ./nginx.conf:/etc/nginx/nginx.conf:ro
      restart: always
      depends_on:
       - app1
       - app2
